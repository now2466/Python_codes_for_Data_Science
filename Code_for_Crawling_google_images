from selenium import webdriver
import time
from selenium.webdriver.common.keys import Keys
import urllib.request
import time

driver = webdriver.Chrome("chromedriver.exe")

keyword = str(input("insert keyword for searching : "))
driver.get("https://www.google.co.kr/imghp?hl=ko&authuser=0&ogbl")##google image search page
driver.maximize_window()
time.sleep(2)
driver.find_element_by_css_selector("input.gLFyf").send_keys(keyword) #send keyword
driver.find_element_by_css_selector("input.gLFyf").send_keys(Keys.RETURN)


last_height = driver.execute_script("return document.body.scrollHeight") #initialize standard of height first
while True:
    driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")

    time.sleep(1)

    new_height = driver.execute_script("return document.body.scrollHeight") ## update new_height
    if new_height == last_height:
        try:
            driver.find_element_by_css_selector(".mye4qd").click() ## click more button
        except:
            break
    last_height = new_height ##last_height update

i=0

list = driver.find_elements_by_css_selector("img.rg_i.Q4LuWd")##thumnails list
print(len(list)) #print number of thumnails

address = "C:/Users/Yoon/Desktop/blogCrawling/kickboard/"

for img in list:
    i += 1
    try:

        imgurl = img.get_attribute("src") # get thumnails address list
        time.sleep(1)
        urllib.request.urlretrieve(imgurl,address+str(keyword)+str(i)+".jpg") # download images in address folder

    except:
        pass
